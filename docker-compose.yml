# ===========================================
# Local development / reference compose file
# In production, Coolify manages each service separately.
# ===========================================
#
# NOTE: This file is now for PCD App local testing ONLY.
# PocketBase should be deployed as a separate service on Coolify.
# The PCD app will connect to your separate PocketBase instance via VITE_POCKETBASE_URL.
#
# Usage:
#   1. Deploy PocketBase as separate service on Coolify
#   2. Set VITE_POCKETBASE_URL in PCD app service to point to your PocketBase
#   3. Build and run PCD app locally (optional)
#

services:
  # ---- PCD App ----
  pcd-app:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_POCKETBASE_URL: ${VITE_POCKETBASE_URL:-http://pocketbase:8090}
    ports:
      - "8022:80"

# ===========================================
# Deploying on Coolify
# ===========================================
#
# 1. Deploy PocketBase separately:
#    - Service Type: Dockerfile
#    - Image: ghcr.io/pocketbase/pocketbase:latest
#    - Port: 8090
#    - Env: PB_ENCRYPTION_ENV=off (dev only)
#
# 2. Deploy PCD App:
#    - Build Args: VITE_POCKETBASE_URL=http://your-pocketbase-url:8090
#    - Point to your separate PocketBase container URL
#
# ===========================================
